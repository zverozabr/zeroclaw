# Παρατηρησιμότητα & Έλεγχος SOP

Αυτή η σελίδα καλύπτει πού αποθηκεύονται τα αποδεικτικά στοιχεία εκτέλεσης SOP και πώς να τα επιθεωρείτε.

## 1. Αποθήκευση Ελέγχου

Οι εγγραφές ελέγχου SOP αποθηκεύονται μέσω `SopAuditLogger` στο ρυθμισμένο backend Μνήμης, κατηγορία `sop`.

Κοινά μοτίβα κλειδιών:

- `sop_run_{run_id}`: στιγμιότυπο εκτέλεσης (ενημερώσεις εκκίνησης + ολοκλήρωσης)
- `sop_step_{run_id}_{step_number}`: αποτέλεσμα ανά βήμα
- `sop_approval_{run_id}_{step_number}`: εγγραφή έγκρισης operator
- `sop_timeout_approve_{run_id}_{step_number}`: εγγραφή αυτόματης έγκρισης λόγω timeout
- `sop_gate_decision_{gate_id}_{timestamp_ms}`: εγγραφή απόφασης αξιολογητή πύλης (όταν είναι ενεργό το `ampersona-gates`)
- `sop_phase_state`: αποθηκευμένο στιγμιότυπο κατάστασης φάσης εμπιστοσύνης (όταν είναι ενεργό το `ampersona-gates`)

## 2. Μονοπάτια Επιθεώρησης

### 2.1 CLI σε επίπεδο ορισμού

```bash
zeroclaw sop list
zeroclaw sop validate [name]
zeroclaw sop show <name>
```

### 2.2 Εργαλεία κατάστασης εκτέλεσης runtime

Η κατάσταση εκτέλεσης SOP ερωτάται από εργαλεία εντός agent:

- `sop_status` — ενεργές/ολοκληρωμένες εκτελέσεις και προαιρετικά μετρικά
- `sop_status` με `include_gate_status: true` — φάση εμπιστοσύνης και κατάσταση αξιολογητή πύλης (όταν διαθέσιμο)
- `sop_approve` — έγκριση αναμένοντος βήματος εκτέλεσης
- `sop_advance` — υποβολή αποτελέσματος βήματος και προώθηση εκτέλεσης

## 3. Μετρικά

- Το `/metrics` εκθέτει μετρικά observer όταν `[observability] backend = "prometheus"`.
- Τα τρέχοντα εξαγόμενα ονόματα είναι οικογένειες `zeroclaw_*` (γενικά μετρικά runtime).
- Συγκεντρωτικά στοιχεία ειδικά για SOP είναι διαθέσιμα μέσω `sop_status` με `include_metrics: true`.
